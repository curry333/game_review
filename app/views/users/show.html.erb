<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="text-center">
  <h1>ユーザ詳細</h1>
  <br>
  <br>
  <br>
  <ul class="list-unstyled">
    <li><%= image_tag @user.image.thumb.to_s %></li>
    <% if current_user == @user %>
      <li><%= link_to 'ユーザ情報編集', edit_user_path(@user), class: 'btn btn-sm btn-primary' %></li>
    <% else %>
    <% end %>
    <br>
    <li>ユーザネーム　<%= @user.name %></li>
    <br>
    <li><%= link_to 'お気に入り登録 あとでパス変える', root_url, class: 'btn btn-sm btn-primary' %></li>
    <br>
    <% if current_user == @user %>
    <li><%= link_to '新規レビュー投稿', new_review_path, class: 'btn btn-sm btn-primary' %></li>
    <% else %>
    <% end %>
    <br>
    <br>
    <h4>投稿したレビュー</h4>
      <% @reviews.each do |review| %>
      <br>
      <li>ゲームタイトル　<%= review.game.title %></li>
      <p><%= link_to 'お気に入り登録 あとでパス変える', root_url, class: 'btn btn-sm btn-primary' %></p>
      <li>発売元メーカー　<%= review.game.maker.maker %></li>
      <p><%= link_to 'お気に入り登録 あとでパス変える', root_url, class: 'btn btn-sm btn-primary' %></p>
      <li>評価　<%= review.score %></li>
      <ul class="list-unstyled">
        <li>
          <p class="btn btn-info btn-sm" >レビューの表示・非表示</p>
          <ul class="list-unstyled" style="display: none;">
            <li class="content1-1">投稿日時　<%= review.created_at %></li>
            <li class="content1-2"><%= review.review %></li>
            <li class="content1-3"><%= link_to 'お気に入り登録 あとでパス変える', root_url, class: 'btn btn-sm btn-primary' %></li>
            <br>
          </ul>
        </li>
        <li>
          <p class="btn btn-info btn-sm">コメントの表示・非表示</p>
          <ul class="list-unstyled" style="display: none;">
            <li class="content2-1">コメント日時</li>
            <li class="content2-2">コメント内容</li>
            <li class="content2-3">投稿フォーム</li>
            <br>
          </ul>
        </li>
      </ul>
      <% if current_user == review.user %>
        <li><%= link_to '投稿編集', edit_review_path(review), class: 'btn btn-sm btn-primary' %></li>
        <br>
        <li><%= link_to "投稿削除", review, method: :delete, data: { confirm: "この投稿を削除してよろしいですか?" }, class: 'btn btn-danger btn-sm' %></li>
      <% end %>
      <br>
      <br>
      <br>
      <% end %>
  </ul>
</div>

<script>
$(function(){
 
    //.accordion1の中のp要素がクリックされたら
	$('.list-unstyled p').click(function(){
 
		//クリックされた.accordion1の中のp要素に隣接するul要素が開いたり閉じたりする。
		$(this).next('ul').slideToggle();
 
	});
});
</script>